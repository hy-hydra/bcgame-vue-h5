<template>
    <div class="flex items-center justify-between pl-20px py-20px bg-[#2e3036]">
        <svg @click="() => { clickIcon(0) }" xmlns="http://www.w3.org/2000/svg" width="22" height="20"
            viewBox="0 0 22 20" :fill="store.select === 0 ? '#5DDB1C' : 'currentcolor'">
            <path fill-rule="evenodd" clip-rule="evenodd"
                d="M11.669 2.60192C11.2887 2.25965 10.7113 2.25965 10.331 2.60192L2.33104 9.8019C2.12032 9.9916 2 10.2617 2 10.5452V16.6545C2 17.2068 2.44772 17.6545 3 17.6545H6.2727C6.825 17.6545 7.2727 17.2068 7.2727 16.6545V15.2545C7.2727 13.5976 8.6159 12.2545 10.2727 12.2545H11.7273C13.3841 12.2545 14.7273 13.5976 14.7273 15.2545V16.6545C14.7273 17.2068 15.175 17.6545 15.7273 17.6545H19C19.5523 17.6545 20 17.2068 20 16.6545V10.5452C20 10.2617 19.8797 9.9916 19.669 9.8019L11.669 2.60192ZM8.9931 1.11534C10.134 0.0885074 11.866 0.0885074 13.0069 1.11534L21.0069 8.3153C21.639 8.8843 22 9.6948 22 10.5452V16.6545C22 18.3113 20.6569 19.6545 19 19.6545H15.7273C14.0704 19.6545 12.7273 18.3113 12.7273 16.6545V15.2545C12.7273 14.7022 12.2796 14.2545 11.7273 14.2545H10.2727C9.7204 14.2545 9.2727 14.7022 9.2727 15.2545V16.6545C9.2727 18.3113 7.9296 19.6545 6.2727 19.6545H3C1.34315 19.6545 0 18.3113 0 16.6545V10.5452C0 9.6948 0.36096 8.8843 0.99311 8.3153L8.9931 1.11534Z">
            </path>
        </svg>
        <div class="block w-2px h-30px bg-[#98A7B5]"></div>
        <svg @click="() => { clickIcon(1) }" width="24" height="24" viewBox="0 0 20 20"
            xmlns="http://www.w3.org/2000/svg" :fill="store.select === 1 ? '#5DDB1C' : 'currentcolor'">
            <path fill-rule="evenodd" clip-rule="evenodd"
                d="M10 20C15.5228 20 20 15.5228 20 10C20 4.47715 15.5228 0 10 0C4.47715 0 0 4.47715 0 10C0 15.5228 4.47715 20 10 20ZM15.4217 8.43353C15.4217 11.3613 13.0483 13.7347 10.1205 13.7347C7.19277 13.7347 4.81934 11.3613 4.81934 8.43353C4.81934 5.50575 7.19277 3.13232 10.1205 3.13232C13.0483 3.13232 15.4217 5.50575 15.4217 8.43353ZM10.8344 12.4719C10.3169 12.5725 9.84031 12.5779 9.40446 12.4883C8.97043 12.396 8.61065 12.2254 8.32514 11.9763C8.03963 11.7273 7.86074 11.4169 7.78846 11.0451C7.73273 10.7584 7.74653 10.4825 7.82986 10.2176C7.91499 9.95001 8.05522 9.7147 8.25054 9.51169C8.44542 9.30644 8.67851 9.15421 8.94979 9.05498L8.94065 9.00794C8.55893 9.00543 8.22641 8.88526 7.94307 8.64744C7.6593 8.40738 7.48085 8.0992 7.4077 7.72289C7.33847 7.36674 7.38102 7.02954 7.53534 6.7113C7.68923 6.39082 7.93215 6.11579 8.26411 5.88622C8.59787 5.65398 8.99658 5.49279 9.46025 5.40266C9.92391 5.31254 10.3529 5.31284 10.7471 5.40358C11.1435 5.49389 11.4731 5.65879 11.7359 5.89829C11.9982 6.13555 12.1648 6.43092 12.2359 6.78439C12.3072 7.16337 12.255 7.5164 12.0791 7.84348C11.9033 8.17056 11.6422 8.40611 11.2959 8.55012L11.3051 8.59716C11.5893 8.58841 11.8591 8.64289 12.1144 8.76063C12.3716 8.87569 12.5897 9.04133 12.7689 9.25756C12.9499 9.4711 13.0694 9.72102 13.1273 10.0073C13.1974 10.3796 13.1467 10.7346 12.9752 11.0725C12.8038 11.4103 12.533 11.7035 12.1629 11.9521C11.7946 12.1981 11.3518 12.3713 10.8344 12.4719ZM10.6267 11.4034C10.8574 11.3586 11.0509 11.278 11.2073 11.1616C11.3632 11.0429 11.475 10.9003 11.5426 10.7338C11.6119 10.5645 11.6277 10.3825 11.5898 10.1876C11.5511 9.98825 11.4665 9.82221 11.3361 9.68949C11.2052 9.55453 11.0451 9.46013 10.8556 9.4063C10.6658 9.35023 10.4588 9.34396 10.2348 9.3875C10.0131 9.4306 9.82354 9.51394 9.66624 9.6375C9.50851 9.75881 9.39427 9.90655 9.32351 10.0807C9.25456 10.2522 9.23946 10.4376 9.27821 10.6369C9.31609 10.8318 9.39778 10.9949 9.52326 11.1263C9.64832 11.2554 9.80647 11.3455 9.99773 11.3967C10.1886 11.4456 10.3982 11.4478 10.6267 11.4034ZM10.0291 8.32913C10.2217 8.29169 10.3855 8.21918 10.5203 8.11161C10.6551 8.00404 10.7516 7.87255 10.8097 7.71713C10.8679 7.56171 10.8793 7.39328 10.844 7.21184C10.8092 7.03265 10.7362 6.88413 10.6249 6.76628C10.5132 6.64619 10.3761 6.56243 10.2134 6.51501C10.0504 6.46535 9.87027 6.45967 9.67316 6.49799C9.47828 6.53587 9.31343 6.60859 9.17859 6.71616C9.04332 6.82149 8.9464 6.95075 8.88785 7.10393C8.83109 7.25443 8.82013 7.41928 8.85496 7.59848C8.89023 7.77991 8.96392 7.9318 9.07603 8.05413C9.18814 8.17646 9.32686 8.26223 9.49217 8.31146C9.65749 8.36069 9.83646 8.36658 10.0291 8.32913Z">
            </path>
        </svg>
        <svg @click="() => { clickIcon(2) }" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
            viewBox="0 0 24 24" :fill="store.select === 2 ? '#5DDB1C' : 'currentcolor'">
            <g clip-path="url(#clip0_7074_602)">
                <path
                    d="M14.4904 1.55643L18.7313 4.20622C20.2713 5.16872 21.2075 6.85747 21.2075 8.67309V14.715C21.2075 16.5313 20.272 18.2201 18.7313 19.1818L14.4904 21.8316C12.7827 22.8984 10.6156 22.8984 8.90794 21.8316L4.66711 19.1818C3.12711 18.2193 2.19086 16.5306 2.19086 14.715V8.67309C2.19086 6.85674 3.12638 5.16799 4.66711 4.20622L8.90794 1.55643C10.6156 0.489655 12.7827 0.489655 14.4904 1.55643ZM15.1314 18.4942C14.8186 18.1552 14.1594 18.32 13.6592 18.8617C13.159 19.4035 13.0066 20.1166 13.3194 20.4557C13.6322 20.7948 14.2914 20.63 14.7916 20.0882C15.2918 19.5464 15.4442 18.8333 15.1314 18.4942ZM8.04606 13.1093C7.16669 12.1519 5.97231 11.8975 5.37732 12.5406C4.78232 13.1837 5.012 14.4809 5.89065 15.439C6.77002 16.3964 7.9644 16.6509 8.5594 16.0078C9.1544 15.3647 8.92471 14.0675 8.04606 13.1093ZM17.6579 14.0784C17.3451 13.7393 16.686 13.9041 16.1858 14.4459C15.6855 14.9877 15.5331 15.7008 15.846 16.0399C16.1588 16.3789 16.8179 16.2141 17.3181 15.6724C17.8184 15.1306 17.9708 14.4175 17.6579 14.0784ZM19.9898 10.0818C19.677 9.74351 19.0178 9.90757 18.5176 10.4493C18.0174 10.9911 17.865 11.7042 18.1778 12.0433C18.4906 12.3824 19.1498 12.2176 19.65 11.6758C20.1502 11.134 20.3026 10.4209 19.9898 10.0818ZM15.4427 4.42424C14.4824 4.42424 13.7037 4.95726 13.7037 5.61497C13.7037 6.27268 14.4824 6.8057 15.4427 6.8057C16.403 6.8057 17.1818 6.27268 17.1818 5.61497C17.1818 4.95726 16.403 4.42424 15.4427 4.42424ZM8.03804 4.42424C7.07773 4.42424 6.29898 4.95726 6.29898 5.61497C6.29898 6.27268 7.07773 6.8057 8.03804 6.8057C8.99836 6.8057 9.77711 6.27268 9.77711 5.61497C9.77711 4.95726 8.99836 4.42424 8.03804 4.42424Z">
                </path>
            </g>
            <defs>
                <clipPath id="clip0_7074_602">
                    <rect width="23.3333" height="23.3333" fill="currentcolor"
                        transform="translate(0.0325317 0.0263672)"></rect>
                </clipPath>
            </defs>
        </svg>
        <svg @click="() => { clickIcon(3) }" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
            viewBox="0 0 24 24" :fill="store.select === 3 ? '#5DDB1C' : 'currentcolor'">
            <g clip-path="url(#clip0_6810_41787)">
                <path
                    d="M1.60741 7.99051C1.07424 7.86501 1.10031 7.09751 1.64077 7.00849L1.95996 6.95591C4.52407 6.53356 6.53375 4.52388 6.9561 1.95977C7.04187 1.43907 7.79054 1.43908 7.87631 1.95977C8.29866 4.52388 10.3083 6.53356 12.8725 6.95591L13.1916 7.00849C13.7321 7.09751 13.7582 7.86501 13.225 7.9905L12.5043 8.16014C10.1246 8.72025 8.30644 10.6427 7.8798 13.0499C7.78795 13.5681 7.04445 13.5681 6.9526 13.0499C6.52595 10.6427 4.7078 8.72025 2.32812 8.16014L1.60741 7.99051Z">
                </path>
                <path
                    d="M14.01 13.3582C13.6277 13.2682 13.6464 12.7179 14.0339 12.6541L14.2628 12.6164C16.1012 12.3136 17.5421 10.8727 17.8449 9.03426C17.9064 8.66093 18.4432 8.66093 18.5047 9.03426C18.8075 10.8727 20.2484 12.3136 22.0868 12.6164L22.3157 12.6541C22.7032 12.7179 22.7219 13.2682 22.3396 13.3582L21.8229 13.4798C20.1167 13.8814 18.8131 15.2598 18.5072 16.9857C18.4413 17.3572 17.9083 17.3572 17.8424 16.9857C17.5365 15.2598 16.2329 13.8814 14.5267 13.4798L14.01 13.3582Z">
                </path>
                <path
                    d="M6.57119 18.8469C6.22798 18.7661 6.24476 18.272 6.59266 18.2147L6.79813 18.1809C8.44872 17.909 9.7424 16.6153 10.0143 14.9647C10.0695 14.6295 10.5514 14.6295 10.6066 14.9647C10.8785 16.6153 12.1722 17.909 13.8228 18.1809L14.0282 18.2147C14.3761 18.272 14.3929 18.7661 14.0497 18.8469L13.5858 18.9561C12.0539 19.3166 10.8835 20.5541 10.6089 22.1037C10.5498 22.4373 10.0711 22.4373 10.012 22.1037C9.73738 20.5541 8.56699 19.3166 7.03513 18.9561L6.57119 18.8469Z">
                </path>
            </g>
            <defs>
                <clipPath id="clip0_6810_41787">
                    <rect width="23.3333" height="23.3333" fill="currentcolor" transform="translate(0.333313 0.333496)">
                    </rect>
                </clipPath>
            </defs>
        </svg>
        <van-popover overlay-class="overlay-pop" v-model:show="showPopover" placement="bottom-end" :show-arrow="false">
            <div class="w-100vw h-200px mt-20px bg-[#202124]"></div>
            <template #reference>
                <div class="pr-20px">
                    <svg v-if="!showPopover" xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                        viewBox="0 0 16 16" fill="currentcolor">
                        <path
                            d="M8.7542 11.1529C8.35634 11.6157 7.64366 11.6157 7.2458 11.1529L4.24545 7.66298C3.68586 7.01207 4.14485 6 4.99964 6H11.0004C11.8551 6 12.3141 7.01207 11.7546 7.66298L8.7542 11.1529Z">
                        </path>
                    </svg>
                    <svg v-else xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"
                        fill="currentcolor" class="rotate-180">
                        <path
                            d="M8.7542 11.1529C8.35634 11.6157 7.64366 11.6157 7.2458 11.1529L4.24545 7.66298C3.68586 7.01207 4.14485 6 4.99964 6H11.0004C11.8551 6 12.3141 7.01207 11.7546 7.66298L8.7542 11.1529Z">
                        </path>
                    </svg>
                </div>
            </template>
        </van-popover>
    </div>
    <div v-if="store?.select == 0">
        <LotterySwipe  v-for="item in store.list" :item="item"/>
        <Footer />
    </div>
    <LotteryList v-else :list="store.list[store?.select-1].lotteryList" />
</template>

<script setup lang="ts">
import { lotteryList } from "@/api/banner"
import { lotterystore } from "./store"
import { showToast } from "vant";
import LotterySwipe from "./components/lottery-swipe.vue"
import LotteryList from "./components/lottery-list.vue"
import Footer from "@/components/footer/index.vue";

const showPopover = ref(false)
const store = lotterystore()
onMounted(() => {
    getLotteryList()
})

const getLotteryList = async () => {
    let res = await lotteryList();
    if (res?.code == 1) {
        store.updateList(res?.data?.list)
    } else {
        showToast(res?.msg)
    }
}

const clickIcon = (select) => {
    console.log(select)
    store.updateSelect(select)
}
</script>

<style lang="less">
.overlay-pop {
    background-color: #2e3036 !important;
    padding-top: 20px;
}

:root {
    --van-popover-light-background: #2e3036 !important;
}
</style>